
#include "GameDataStruct.h"
#include "Arabia2Kanji.h"
#include <algorithm>

/*
 YYYY/MM/DD‚©‚çŒ³†‚ğ“¾‚é
 */

struct NB6GENGO {
	char gengou[9];
	int start_YMD;
};

NB6GENGO gengo_list[] = {
	""	  ,        0,
	"‘å“¯",  8060608,
	"Om",  8101020,
	"“V’·",  8240208,
	"³˜a",  8340214,
	"‰ÃË",  8480716,
	"mõ",  8510601,
	"Ät",  8541223,
	"“VˆÀ",  8570320,
	"’åŠÏ",  8590520,
	"Œ³Œc",  8770601,
	"m˜a",  8850311,
	"Š°•½",  8890530,
	"¹‘×",  8980520,
	"‰„Šì",  9010831,
	"‰„’·",  9230529,
	"³•½",  9310516,
	"“VŒc",  9380622,
	"“V—ï",  9470515,
	"“V“¿",  9571121,
	"‰˜a",  9610305,
	"N•Û",  9640819,
	"ˆÀ˜a",  9680908,
	"“V˜\",  9700503,
	"“V‰„",  9740116,
	"’åŒ³",  9760811,
	"“VŒ³",  9781231,
	"‰iŠÏ",  9830529,
	"Š°˜a",  9850519,
	"‰i‰„",  9870505,
	"‰iâN",  9890910,
	"³—ï",  9901126,
	"’·“¿",  9950325,
	"’·•Û",  9990201,
	"Š°O", 10040808,
	"’·˜a", 10120208,
	"Š°m", 10170521,
	"¡ˆÀ", 10210317,
	"–œõ", 10240819,
	"’·Œ³", 10280818,
	"’·—ï", 10370509,
	"’·‹v", 10401216,
	"Š°“¿", 10441216,
	"‰i³", 10460522,
	"“VŠì", 10530202,
	"N•½", 10580919,
	"¡—ï", 10650904,
	"‰„‹v", 10690506,
	"³•Û", 10740916,
	"³—ï", 10771205,
	"‰i•Û", 10810322,
	"‰“¿", 10840315,
	"Š°¡", 10870511,
	"‰Ã•Û", 10950123,
	"‰i’·", 10970103,
	"³“¿", 10971227,
	"N˜a", 10990915,
	"’·¡", 11040308,
	"‰Ã³", 11060513,
	"“Vm", 11080909,
	"“V‰i", 11100731,
	"‰i‹v", 11130825,
	"Œ³‰i", 11180425,
	"•ÛˆÀ", 11200509,
	"“V¡", 11240518,
	"‘å¡", 11260215,
	"“V³", 11310228,
	"’·³", 11320921,
	"•Û‰„", 11350610,
	"‰i¡", 11410813,
	"N¡", 11420525,
	"“V—{", 11440328,
	"‹vˆÀ", 11450812,
	"m•½", 11510214,
	"‹võ", 11541204,
	"•ÛŒ³", 11560518,
	"•½¡", 11590509,
	"‰i—ï", 11600218,
	"‰•Û", 11610924,
	"’·Š°", 11630504,
	"‰i–œ", 11650714,
	"mˆÀ", 11660923,
	"‰Ã‰", 11690506,
	"³ˆÀ", 11710527,
	"ˆÀŒ³", 11750816,
	"¡³", 11770829,
	"—{˜a", 11810825,
	"õ‰i", 11820629,
	"Œ³—ï", 11840527,
	"•¶¡", 11850909,
	"Œš‹v", 11900516,
	"³¡", 11990523,
	"Œšm", 12010319,
	"Œ³‹v", 12040323,
	"Œš‰i", 12060605,
	"³Œ³", 12071116,
	"Œš—ï", 12110423,
	"Œš•Û", 12140118,
	"³‹v", 12190527,
	"’å‰", 12220525,
	"Œ³m", 12241231,
	"‰Ã˜\", 12250528,
	"ˆÀ’å", 12280118,
	"Š°Šì", 12290331,
	"’å‰i", 12320423,
	"“V•Ÿ", 12330525,
	"•¶—ï", 12341127,
	"‰Ã’õ", 12351101,
	"—ïm", 12381230,
	"‰„‰", 12390313,
	"m¡", 12400805,
	"Š°Œ³", 12430318,
	"•ó¡", 12470405,
	"Œš’·", 12490502,
	"NŒ³", 12561024,
	"³‰Ã", 12570331,
	"³Œ³", 12590420,
	"•¶‰", 12600524,
	"O’·", 12610322,
	"•¶‰i", 12640327,
	"Œš¡", 12750522,
	"OˆÀ", 12780323,
	"³‰", 12880529,
	"‰im", 12930906,
	"³ˆÀ", 12990525,
	"Š£Œ³", 13021210,
	"‰ÃŒ³", 13030916,
	"“¿¡", 13060118,
	"‰„Œc", 13081122,
	"‰’·", 13110517,
	"³˜a", 13120427,
	"•¶•Û", 13170316,
	"Œ³‰", 13190518,
	"Œ³‹œ", 13210322,
	"³’†", 13241225,
	"‰Ã—ï", 13260528,
	"Œ³“¿", 13290922,
	"Œ³O", 13310911,
	"Œš•", 13340305,
	"—ï‰", 13381011,
	"N‰i", 13420601,
	"’å˜a", 13451115,
	"ŠÏ‰", 13500404,
	"•¶˜a", 13521104,
	"‰„•¶", 13560429,
	"NˆÀ", 13610504,
	"’å¡", 13621011,
	"‰ˆÀ", 13680307,
	"‰i˜a", 13750329,
	"N—ï", 13790409,
	"‰i“¿", 13810320,
	"Š“¿", 13840319,
	"‰ÃŒc", 13871005,
	"N‰", 13890307,
	"–¾“¿", 13900412,
	"‰‰i", 13940802,
	"³’·", 14280610,
	"‰i‹", 14291003,
	"‰Ã‹g", 14410310,
	"•¶ˆÀ", 14440223,
	"•ó“¿", 14490816,
	"‹“¿", 14520810,
	"N³", 14550906,
	"’·˜\", 14571016,
	"Š°³", 14610201,
	"•¶³", 14660314,
	"‰m", 14670409,
	"•¶–¾", 14690608,
	"’·‹", 14870809,
	"‰„“¿", 14890916,
	"–¾‰", 14920812,
	"•¶‹T", 15010318,
	"‰i³", 15040316,
	"‘å‰i", 15210923,
	"‹˜\", 15280903,
	"“V•¶", 15320829,
	"O¡", 15551107,
	"‰i˜\", 15580318,
	"Œ³‹T", 15700527,
	"“V³", 15730825,
	"•¶˜\", 15930110,
	"Œc’·", 15961216,
	"Œ³˜a", 16150905,
	"Š°‰i", 16240417,
	"³•Û", 16450113,
	"ŒcˆÀ", 16480407,
	"³‰", 16521020,
	"–¾—ï", 16550518,
	"–œ¡", 16580821,
	"Š°•¶", 16610523,
	"‰„•ó", 16731030,
	"“V˜a", 16811109,
	"’å‹", 16840405,
	"Œ³˜\", 16881023,
	"•ó‰i", 17040416,
	"³“¿", 17110611,
	"‹•Û", 17160809,
	"Œ³•¶", 17360607,
	"Š°•Û", 17410412,
	"‰„‹", 17440403,
	"Š°‰„", 17480805,
	"•ó—ï", 17511214,
	"–¾˜a", 17640630,
	"ˆÀ‰i", 17721210,
	"“V–¾", 17810425,
	"Š°­", 17890219,
	"‹˜a", 18010319,
	"•¶‰»", 18040322,
	"•¶­", 18180526,
	"“V•Û", 18310123,
	"O‰»", 18450109,
	"‰Ã‰i", 18480401,
	"ˆÀ­", 18550115,
	"–œ‰„", 18600408,
	"•¶‹v", 18610329,
	"Œ³¡", 18640327,
	"Œc‰", 18650501,
	"–¾¡", 18681023,
	"‘å³", 19120730,
	"º˜a", 19261225,
	"•½¬", 19890108,
};



// ”NEŒE“ú‚æ‚èŒ³†•¶š—ñ‚ğ“¾‚éBŒE“ú‚ğÈ—ª‚µ‚½ê‡‚ÍA12Œ31“ú(”N––‚Ì“ú)‚ÆŒ©‚È‚·B
// ——R‚Í“VãÄ‹L‚Å‚ÍA‚Æ‚ ‚é”N‚Ì“r’†‚ÅŒ³†‚ª•Ï‚í‚Á‚Ä‚¢‚éê‡AVŒ³†‚Ì•û‚ğí‚ÉÌ—p‚·‚é‚½‚ßB
NB6WAREKI getWarekiFromYMD(int iYear, int iMonth, int iDay) {

	// •Ô‚è’lŒ^
	NB6WAREKI result = {0};

	if ( iYear==-1 ) {
		iYear=getYearAD();
	}
	if ( iMonth==-1 ) {
		iMonth=12;
	}
	if ( iDay==-1 ) {
		iDay=31;
	}
	int iYMD = iYear*10000+iMonth*100+iDay;

	int GENGO_NUM = sizeof(gengo_list)/sizeof(gengo_list[0]);
	for ( int i=GENGO_NUM-1; i >= 0; i-- ) {
		if ( iYMD >= gengo_list[i].start_YMD ) {
			// Œ³†‚ğ•¡»
			strcpy( result.gengou, gengo_list[i].gengou );

			int iStartGengoYear = gengo_list[i].start_YMD / 10000; // ŠJn”N‚ğ“¾‚éB
			result.iyear = (iYear-iStartGengoYear)+1; // ˜a—ï“à‚Å‚Ì”N‚ğ“ü‚ê‚éBŒ³”N‚Í‚O‚Æ‚¢‚¤‚±‚Æ

			// Œ³”N‚Í“Á•Ê‚ÈŒ¾‚¢•û
			if ( result.iyear == 1 ) {
				strcpy( result.kanjiyear, "Œ³" ); // ŠJn”N‚Í“Á•Ê‚ÉuŒ³”Nv‚Æ‚¢‚¤Œ¾‚¢•û‚ğ‚·‚éB
				return result;

			// ‚»‚êˆÈŠO‚ÍŒvZ
			} else {
				// Œ³”NˆÈŠO‚Í‚P‚Â‚¸‚Â•ÏŠ·‚ª•K—vB
				_itoa( result.iyear, result.kanjiyear, 10); // ˆê’[‚±‚±‚É”’l¨•¶š‚É‚µ‚½‚à‚Ì‚ğƒRƒs[
				char szBuf[15]; // ‘SŠpŠ¿š—pƒoƒbƒtƒ@
				arabia2kanji( (const char *)result.kanjiyear, szBuf ); // ”¼Šp”š¨‘SŠpŠ¿š
				strcpy( result.kanjiyear, szBuf ); // ”¼Šp”š‚Éã‘‚«

				return result;
			}
		}
	}

	// ‚±‚±‚Ü‚Å—ˆ‚½‚ç”»’è‚Å‚«‚È‚©‚Á‚½‚à‚ÌB‰Šú’l“I‚È‚à‚Ì‚ğ•Ô‚·
	strcpy( result.gengou, "");
	strcpy( result.kanjiyear, "");
	result.iyear = 0;
	return result;
}


